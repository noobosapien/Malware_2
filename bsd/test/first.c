#include <sys/param.h>
#include <sys/module.h>
#include <sys/kernel.h>
#include <sys/systm.h>

static int load(struct module* module, int cmd, void* arg){
    int error = 0;
    
    switch (cmd)
    {
    case MOD_LOAD:
        uprintf("Hello world\n");
        break;
    case MOD_UNLOAD:
        uprintf("Good bye\n");
    default:
        error = EOPNOTSUPP;
        break;
    }

    return error;

}

static moduledata_t hello_mod = {
    "first", load, NULL
};

DECLARE_MODULE(first, hello_mod, SI_SUB_DRIVERS, SI_ORDER_MIDDLE);